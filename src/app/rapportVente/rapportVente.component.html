<h1>Ventes</h1>
<a routerLink="add" class="btn btn-sm btn-success mb-2">Ajouter un article</a>
<div>
    <form *ngIf="!loading" [formGroup]="form" (ngSubmit)="onSubmit()" >
        <div class="row">
            <div class="mb-3 col">
                <label class="form-label">Article</label>
                <div class="col-sm-10">
                    <select class="form-select" aria-label="Default select example" select [name]="" id="" formControlName="idArticle" 
                        [ngClass]="{ 'is-invalid': submitted && f.idTypeArticle.errors }">
                        <option *ngFor="let article of articles" [value]="article.id">{{article.nom }}</option>
                    </select>
                    <div *ngIf="submitted && f.idTypeArticle.errors" class="invalid-feedback">
                        <div *ngIf="f.idTypeArticle.errors.required">Le prix de vente est obligatoire</div>
                    </div>
                </div>
            </div>
                <div class="mb-3 col">
                    <label class="form-label">Date inferieure</label>
                    <div class="col-sm-10">
                        <input type="date" formControlName="dateInferieure" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.nom.errors }" />
                        <div *ngIf="submitted && f.idTypeArticle.errors" class="invalid-feedback">
                        <div *ngIf="f.idTypeArticle.errors.required">Le prix de vente est obligatoire</div>
                    </div>
                </div>
            </div>

            <div class="mb-3 col">
                <label class="form-label">Date superieure</label>
                <div class="col-sm-10">
                    <input type="date" formControlName="dateSuperieure" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.nom.errors }" />
                    <div *ngIf="submitted && f.idTypeArticle.errors" class="invalid-feedback">
                        <div *ngIf="f.idTypeArticle.errors.required">Le prix de vente est obligatoire</div>
                    </div>
                </div>
            </div>
        </div>
        <button [disabled]="submitting" class="btn btn-primary" (click)="getData()">
            <span *ngIf="submitting" class="spinner-border spinner-border-sm me-1"></span>
            Valider
        </button>
    </form>
</div>

<div>
    <table class="table table-striped">
        <thead>
            <tr>
                <th style="width: 25%">nom</th>
                <th style="width: 25%">Quantité</th>
                <th style="width: 25%">Prix de vente</th>
            </tr>
        </thead>
        <tbody>
        
            <tr *ngFor="let ventArticle of venteArticleGroupe">
                <td style="width: 25%">{{getNomArticleById(ventArticle!.idArticle!)}}</td>
                <td style="width: 25%">{{ventArticle.quantite}}</td>
                <td style="width: 25%">{{ventArticle.prixUnitaire}}</td>
                
                <td style="white-space: nowrap"></td>
            </tr>
            
        </tbody>
      </table>
</div>
<!--<div>
  <table class="table table-striped">
    <thead>
        <tr>
            <th style="width: 25%">nom</th>
            <th style="width: 25%">Quantité</th>
            <th style="width: 25%">Prix de vente</th>
            <th style="width: 25%">Date</th>
        </tr>
    </thead>
    <tbody>
    
        <tr *ngFor="let vntArticle of venteArticles">
            <td style="width: 25%">{{getNomArticleById(vntArticle!.idArticle!)}}</td>
            <td style="width: 25%">{{vntArticle.quantite}}</td>
            <td style="width: 25%">{{vntArticle.prixUnitaire}}</td>
            <td style="width: 25%">{{vntArticle.date | date:'dd-MM-yyyy: hh:mm'}}</td>
            
            <td style="white-space: nowrap"></td>
        </tr>
        
    </tbody>
  </table>
 
</div>-->
